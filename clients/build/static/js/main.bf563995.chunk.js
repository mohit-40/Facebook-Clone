(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(28),r=n.n(a),s=n(9),i=n(10),o=n(13),l=n(5),u=n(3),j=n(2),d=n.n(j),b=n(179),f=(n(100),n(7)),p=n(63),h=n.n(p),m=n(33),O=n(6),v="LOGIN_START",x="LOGIN_SUCCESS",g="LOGIN_FAIL",N="LOGOUT_START",k="LOGOUT_SUCCESS",w="LOGOUT_FAIL",y="REGISTER_START",I="REGISTER_SUCCESS",S="REGISTER_FAIL",C={currentUserId:null,isLoading:!1,error:!1},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:case v:return Object(O.a)(Object(O.a)({},e),{},{currentUserId:null,isLoading:!0,error:!1});case I:case x:return Object(O.a)(Object(O.a)({},e),{},{currentUserId:t.payload,isLoading:!1,error:!1});case S:case g:return Object(O.a)(Object(O.a)({},e),{},{currentUserId:null,isLoading:!1,error:!0});case N:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!0,error:!1});case k:return Object(O.a)(Object(O.a)({},e),{},{currentUserId:null,isLoading:!1,error:!1});case w:return Object(O.a)(Object(O.a)({},e),{},{isLoading:!1,error:!0});default:return e}},_="FOLLOW",E="UNFOLLOW",U="UPDATE_FOLLOWING",L={usersId:[]},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return{usersId:[].concat(Object(o.a)(e.usersId),[t.payload])};case E:return{usersId:e.usersId.filter((function(e){return e!==t.payload}))};case U:return{usersId:t.payload};default:return e}},F="SET_SOCKET",R={socket:null},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;return t.type===F?{socket:t.payload}:e},z=n(56),D=n(78),M={key:"root",storage:n.n(D).a,whitelist:["user"]},q=Object(m.combineReducers)({user:P,following:T,socket:A}),B=Object(z.a)(M,q),W=n(80),G=n(79),V=Object(m.createStore)(B,Object(G.composeWithDevTools)(Object(m.applyMiddleware)(W.a))),H=Object(z.b)(V),J=n(81),K="http://localhost:8800/api";K="https://socialifyapp.herokuapp.com/api/";var Y=h.a.create({baseURL:K}),Z=h.a.create({baseURL:K}),Q=function(){var e=Object(l.a)(d.a.mark((function e(){var t,n,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("refreshToken"),n=V.getState(),c=n.user.currentUserId,e.next=6,Y.post("/auth/refresh/"+c,{refreshToken:t});case 6:return a=e.sent,localStorage.setItem("accessToken",a.data.accessToken),console.log("accesstoken updated"),e.abrupt("return",a.data);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();Z.interceptors.request.use(function(){var e=Object(l.a)(d.a.mark((function e(t){var n,c,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("accessToken"),t.headers.authorization="Bearer "+n,e.next=4,Object(J.a)(n);case 4:if(c=e.sent,a=new Date,!(1e3*c.exp<a.getTime())){e.next=11;break}return e.next=9,Q();case 9:r=e.sent,t.headers.authorization="Bearer "+r.accessToken;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)}));var X=n(0);var $=function(e){var t=e.conversation,n=Object(f.c)((function(e){return e.user})).currentUserId,a=Object(c.useState)(),r=Object(u.a)(a,2),s=r[0],i=r[1],o="http://localhost:3000/asset/";return o="https://socialifyapp.herokuapp.com/asset/",Object(c.useEffect)((function(){var e=t.members.find((function(e){return e!==n})),c=function(){var t=Object(l.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z.get("/users?userId="+e);case 3:n=t.sent,i(n.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();c()}),[n,t]),Object(X.jsxs)("div",{className:"conversation",children:[Object(X.jsx)("img",{src:null!==s&&void 0!==s&&s.profilePicture?null===s||void 0===s?void 0:s.profilePicture:o+"/person/noAvatar.png",alt:"img",className:"conversation-img"}),Object(X.jsx)("span",{className:"conversation-name",children:null===s||void 0===s?void 0:s.name})]})},ee=(n(126),n(57));var te=function(e){var t=e.message,n=e.own,a="http://localhost:3000/asset/";a="https://socialifyapp.herokuapp.com/asset/";var r=Object(c.useState)(),s=Object(u.a)(r,2),i=s[0],o=s[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/users?userId="+t.senderId);case 3:n=e.sent,o(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(X.jsxs)("div",{className:n?"message own":"message",children:[Object(X.jsxs)("div",{className:"message-top",children:[Object(X.jsx)("img",{src:null!==i&&void 0!==i&&i.profilePicture?i.profilePicture:a+"/person/noAvatar.png",alt:"",className:"message-img"}),Object(X.jsx)("p",{className:"message-text",children:t.textMessage})]}),Object(X.jsx)("div",{className:"message-bottom",children:Object(ee.a)(t.createdAt)})]})};n(127);var ne=function(e){var t=e.userId,n=e.setCurrConversation,a="http://localhost:3000/asset/";a="https://socialifyapp.herokuapp.com/asset/";var r=Object(c.useState)(),s=Object(u.a)(r,2),i=s[0],o=s[1],j=Object(f.c)((function(e){return e.user.currentUserId}));Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/users?userId="+t);case 3:n=e.sent,o(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var b=function(){var e=Object(l.a)(d.a.mark((function e(){var t,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={senderId:j,receiverId:i._id},e.prev=1,e.next=4,Z.post("/conversations/"+j,t);case 4:c=e.sent,n(c.data[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(X.jsx)("div",{onClick:b,children:Object(X.jsxs)("li",{className:"online-friend",children:[Object(X.jsx)("img",{src:null!==i&&void 0!==i&&i.profilePicture?i.profilePicture:a+"/person/noAvatar.png",alt:""}),Object(X.jsx)("span",{className:"online-friend-badge"}),Object(X.jsx)("span",{className:"name",children:null===i||void 0===i?void 0:i.name})]})})},ce=n(176),ae=n(177),re=n(178),se=(n(128),function(e){return{type:_,payload:e}}),ie=function(e){return{type:E,payload:e}},oe=function(e){return{type:U,payload:e}};n(129);var le=function(e){var t=e.n,n=Object(c.useState)(null),a=Object(u.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/users?userId="+(null===t||void 0===t?void 0:t.senderId));case 3:n=e.sent,s(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(X.jsx)("div",{children:Object(X.jsxs)("li",{className:"notificationListItem",children:[Object(X.jsx)("div",{className:"notificationImgContainer",children:Object(X.jsx)("img",{src:null===r||void 0===r?void 0:r.profilePicture,alt:"img",className:"notificationImg"})}),null===r||void 0===r?void 0:r.name," ",null===t||void 0===t?void 0:t.text]})})};var ue=function(){var e="http://localhost:3000/asset/";e="https://socialifyapp.herokuapp.com/asset/";var t=Object(f.b)(),n=Object(f.c)((function(e){return e.socket.socket})),a=Object(f.c)((function(e){return e.user.currentUserId})),r=Object(c.useState)(null),i=Object(u.a)(r,2),j=i[0],b=i[1];Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/users?userId="+a);case 3:t=e.sent,b(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[a,b]);var p=Object(c.useState)(""),h=Object(u.a)(p,2),m=h[0],O=h[1],v=Object(c.useState)([]),x=Object(u.a)(v,2),g=x[0],y=x[1];Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/users/allUsers");case 3:t=e.sent,y(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var I=Object(c.useState)([]),S=Object(u.a)(I,2),C=S[0],P=S[1],_=Object(c.useState)(!1),E=Object(u.a)(_,2),U=E[0],L=E[1],T=Object(c.useState)(0),F=Object(u.a)(T,2),R=F[0],A=F[1];Object(c.useEffect)((function(){null===n||void 0===n||n.on("getNotification",(function(e){A([e].concat(Object(o.a)(C)).filter((function(e){return"message"===e.type})).length),P([e].concat(Object(o.a)(C)))}))}),[n,C]);var z=Object(c.useState)(!1),D=Object(u.a)(z,2),M=D[0],q=D[1];return Object(X.jsxs)("div",{className:"topbar",children:[Object(X.jsx)("div",{className:"topbar-left",children:Object(X.jsx)(s.b,{className:"text-link",to:"/",children:Object(X.jsxs)("span",{className:"topbar-logo",children:[Object(X.jsx)("i",{className:"fas fa-chess-pawn"})," Socialify"]})})}),Object(X.jsx)("span",{className:"closebar navbar-menu",children:M?Object(X.jsx)("i",{className:"fas fa-window-close",style:{fontSize:"25px"},onClick:function(){return q(!M)}}):Object(X.jsx)("i",{className:"fas fa-bars",onClick:function(){return q(!M)},style:{fontSize:"25px"},children:" "})}),Object(X.jsxs)("div",{className:"topbar-center",children:[Object(X.jsxs)("div",{className:"search",children:[Object(X.jsx)(ce.a,{className:"search-icon"}),Object(X.jsx)("input",{type:"text",name:"",id:"",placeholder:"Search for Person or friend",onChange:function(e){return O(e.target.value)}})]}),Object(X.jsx)("div",{className:"search-result",children:g.filter((function(e){var t;return""!==m&&(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase()))})).slice(0,5).map((function(e){return Object(X.jsx)(s.b,{className:"search-result-item",to:"/profile/".concat(e.username),children:Object(X.jsx)("div",{children:e.name})},e._id)}))})]}),Object(X.jsxs)("div",{className:M?"topbar-right topbar-right-show":"topbar-right topbar-right-hide",children:[Object(X.jsxs)("div",{className:"topbar-link-container",children:[Object(X.jsx)(s.b,{className:"text-link",to:"/profile/".concat(null===j||void 0===j?void 0:j.username),children:Object(X.jsxs)("span",{className:"topbar-link",children:[Object(X.jsx)("i",{className:"fas fa-home"})," ",Object(X.jsx)("span",{className:"navbar-menu-link-text",children:"Home"})]})}),Object(X.jsx)(s.b,{className:"text-link",to:"/",children:Object(X.jsxs)("span",{className:"topbar-link",children:[Object(X.jsx)("i",{className:"fas fa-stream"}),"  ",Object(X.jsx)("span",{className:"navbar-menu-link-text",children:"Timeline"})]})})]}),Object(X.jsxs)("div",{className:"topbar-icon-container",children:[Object(X.jsxs)("div",{className:"topbar-icon-item",children:[Object(X.jsx)(ae.a,{className:"topbar-icon",onClick:function(){return L(!U)}}),Object(X.jsx)("span",{className:"topbar-icon-badge",children:C.length}),Object(X.jsxs)("ul",{className:"notificationList",style:U?{display:"block"}:{display:"none"},children:[C&&C.map((function(e){return Object(X.jsx)(le,{n:e},e)})),0!==C.length?Object(X.jsx)("button",{className:"notificationButton",onClick:function(){return P([])},children:"Mark Read"}):"No new notification"]})]}),Object(X.jsx)("div",{className:"topbar-icon-item",children:Object(X.jsxs)(s.b,{className:"text-link",to:"/chat",children:[Object(X.jsx)(re.a,{className:"topbar-icon"}),Object(X.jsx)("span",{className:"topbar-icon-badge",children:R})]})}),Object(X.jsx)("span",{className:"topbar-link topbar-icon-item",onClick:function(){var e;null===n||void 0===n||n.emit("removeUser",a),t((e=a,function(){var t=Object(l.a)(d.a.mark((function t(n){var c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n({type:N});case 2:return t.prev=2,c=localStorage.getItem("refreshToken"),t.next=6,Z.post("/auth/logout/".concat(e),{refreshToken:c});case 6:localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),n({type:k}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),n({type:w});case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()))},children:Object(X.jsx)("i",{className:"fas fa-sign-out-alt topbar-icon"})})]}),Object(X.jsx)(s.b,{className:"text-link navbar-profilePicture",to:"/profile/".concat(null===j||void 0===j?void 0:j.username),children:Object(X.jsx)("img",{src:null!==j&&void 0!==j&&j.profilePicture?null===j||void 0===j?void 0:j.profilePicture:e+"/person/noAvatar.png",alt:"img"})})]})]})};n(135);var je=function(){var e=Object(f.c)((function(e){return e.socket.socket})),t=Object(f.c)((function(e){return e.user})).currentUserId,n=Object(c.useState)(null),a=Object(u.a)(n,2),r=a[0],s=a[1];Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/users?userId="+t);case 3:n=e.sent,s(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t,s]);var i=Object(c.useState)([]),j=Object(u.a)(i,2),p=j[0],h=j[1],m=Object(c.useState)(null),O=Object(u.a)(m,2),v=O[0],x=O[1],g=Object(c.useState)([]),N=Object(u.a)(g,2),k=N[0],w=N[1],y=Object(c.useState)(),I=Object(u.a)(y,2),S=I[0],C=I[1],P=Object(c.useRef)(),_=Object(c.useState)([]),E=Object(u.a)(_,2),U=E[0],L=E[1],T=Object(c.useState)(),F=Object(u.a)(T,2),R=F[0],A=F[1],z=Object(c.useState)(""),D=Object(u.a)(z,2),M=D[0],q=D[1],B=Object(f.b)(),W=Object(f.c)((function(e){return e.following.usersId}));function G(){return(G=Object(l.a)(d.a.mark((function e(n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.post("/conversations/"+t,{senderId:t,receiverId:n});case 3:c=e.sent,x(c.data[0]),!p.some((function(e){return e._id===c.data[0]._id}))&&h([].concat(Object(o.a)(p),[c.data[0]])),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.get("/users/followings/"+t);case 2:n=e.sent,B(oe(n.data));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t,B]),Object(c.useEffect)((function(){null===e||void 0===e||e.on("getMessage",(function(e){A(e)}))}),[e]),Object(c.useEffect)((function(){R&&(null===v||void 0===v?void 0:v.members.includes(R.senderId))&&w((function(e){return[].concat(Object(o.a)(e),[R])}))}),[R,v]),Object(c.useEffect)((function(){t&&(null===e||void 0===e||e.emit("addUser",t)),null===e||void 0===e||e.on("getUsers",(function(e){L(null===r||void 0===r?void 0:r.followings.filter((function(t){return e.some((function(e){return e.userId===t}))})))}))}),[t,r,e]),Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/conversations/"+t);case 3:n=e.sent,h(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!v){e.next=7;break}return e.next=4,Z.get("/messages/"+v._id+"/"+t);case 4:n=e.sent,console.log(n.data),w(n.data);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[v,t]);var V=function(){var n=Object(l.a)(d.a.mark((function n(c){var a,r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.preventDefault(),a={conversationId:v,senderId:t,textMessage:S},n.prev=2,n.next=5,Z.post("/messages/"+t,a);case 5:r=n.sent,w([].concat(Object(o.a)(k),[r.data])),null===e||void 0===e||e.emit("sendMessage",{body:a,receiverId:null===v||void 0===v?void 0:v.members.find((function(e){return e!=t}))}),null===e||void 0===e||e.emit("sendNotification",{receiverId:null===v||void 0===v?void 0:v.members.find((function(e){return e!=t})),senderId:t,text:"send you a message",type:"message"}),C(""),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[2,12]])})));return function(e){return n.apply(this,arguments)}}(),H=Object(c.useState)([]),J=Object(u.a)(H,2),K=J[0],Y=J[1];Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/users/allUsers");case 3:t=e.sent,Y(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(c.useEffect)((function(){var e;null===(e=P.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[k]);var Q=Object(c.useState)(!0),ee=Object(u.a)(Q,2),ce=ee[0],ae=ee[1],re=Object(c.useState)(!0),se=Object(u.a)(re,2),ie=se[0],le=se[1];return Object(c.useEffect)((function(){window.innerWidth<=600&&(le(!1),ae(!1))}),[]),Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(ue,{}),Object(X.jsx)("div",{className:"messenger",children:Object(X.jsxs)("div",{className:"messenger-wrapper",children:[ie?Object(X.jsx)("i",{className:"fas fa-caret-square-right caret-right caret-chat-sidebar",style:{fontSize:"25px"},onClick:function(){return le(!ie)}}):Object(X.jsx)("i",{className:"fas fa-caret-square-left caret-left caret-chat-sidebar",style:{fontSize:"25px"},onClick:function(){return le(!ie)}}),Object(X.jsx)("div",{className:ie?"chat-left showChatSidebar":"chat-left hideChatSidebar",children:Object(X.jsxs)("div",{className:"chat-left-wrapper",children:[Object(X.jsx)("i",{className:"fas fa-search",children:" Search user here!!"}),Object(X.jsx)("input",{type:"text",className:"search-friend",placeholder:"Search friend for Chat",onChange:function(e){q(e.target.value)}}),K.filter((function(e){return W.includes(e._id)&&""!==M&&e.name&&e.name.toLowerCase().includes(M.toLowerCase())})).slice(0,5).map((function(e){return Object(X.jsxs)("div",{onClick:function(){return function(e){return G.apply(this,arguments)}(e._id)},className:"search-result-item",children:[e.name," "]},null===e||void 0===e?void 0:e._id)})),null===p||void 0===p?void 0:p.map((function(e){return Object(X.jsx)("div",{onClick:function(){return x(e)},children:Object(X.jsx)("div",{className:(null===v||void 0===v?void 0:v._id)===(null===e||void 0===e?void 0:e._id)?"selected":"",children:Object(X.jsx)($,{conversation:e},null===e||void 0===e?void 0:e._id)})},null===e||void 0===e?void 0:e._id)}))]})}),Object(X.jsx)("div",{className:"chat-center",children:v?Object(X.jsxs)("div",{className:"chat-center-wrapper",children:[Object(X.jsx)("div",{className:"chat-center-top",children:null===k||void 0===k?void 0:k.map((function(e){return Object(X.jsx)("div",{ref:P,children:Object(X.jsx)(te,{message:e,own:e.senderId===t},e._id)})}))}),Object(X.jsx)("div",{className:"chat-center-bottom",children:Object(X.jsxs)("form",{className:"box",onSubmit:V,children:[Object(X.jsx)("textarea",{onChange:function(e){return C(e.target.value)},name:"",id:"message",cols:"30",rows:"3",placeholder:"Write something here ....",value:S}),Object(X.jsx)(b.a,{className:"sending-process"}),Object(X.jsxs)("button",{type:"submit",className:"send-btn",children:[Object(X.jsx)("i",{className:"fas fa-paper-plane"}),"Send"]})]})})]}):Object(X.jsx)("div",{className:"no-chat-selected",children:"Search friend and Select Conversation To Start the Chat"})}),ce?Object(X.jsx)("i",{className:"fas fa-caret-square-right caret-right caret-chat-rightbar",style:{fontSize:"25px"},onClick:function(){return ae(!ce)}}):Object(X.jsx)("i",{className:"fas fa-caret-square-left caret-left caret-chat-rightbar",style:{fontSize:"25px"},onClick:function(){return ae(!ce)}}),Object(X.jsx)("div",{className:ce?"chat-right showChatRightbar":"chat-right hideChatRightbar",children:Object(X.jsxs)("div",{className:"chat-right-wrapper",children:[Object(X.jsxs)("h2",{className:"heading",children:[Object(X.jsx)("i",{className:"fas fa-globe-americas"})," Online Friend"]}),Object(X.jsxs)("ul",{className:"online-friend-list",children:[0===(null===U||void 0===U?void 0:U.length)?"No friend Online":"",null===U||void 0===U?void 0:U.map((function(e){return Object(X.jsx)(ne,{userId:e,setCurrConversation:x},e)}))]})]})})]})})]})};n(136);var de=function(e){var t=e.statusCode,n=e.message;return n=n||"Some Error Occured",Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(ue,{}),Object(X.jsx)("div",{className:"error-page",children:Object(X.jsxs)("div",{className:"error-message",children:[t," ",n]})})]})},be=(n(137),n(180)),fe=n(181);n(138);var pe=function(e){var t=e.userId,n=e.className,a="http://localhost:3000/asset/";a="https://socialifyapp.herokuapp.com/asset/";var r=Object(c.useState)(),i=Object(u.a)(r,2),o=i[0],j=i[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/users?userId="+t);case 3:n=e.sent,j(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(X.jsx)(s.b,{to:"/profile/".concat(null===o||void 0===o?void 0:o.username),className:"text-link",children:Object(X.jsxs)("div",{className:n,children:[Object(X.jsx)("img",{src:null!==o&&void 0!==o&&o.profilePicture?null===o||void 0===o?void 0:o.profilePicture:a+"person/noAvatar.png",alt:"img"}),Object(X.jsx)("div",{className:"name",children:null===o||void 0===o?void 0:o.name})]})})};var he=function(){var e=Object(f.c)((function(e){return e.user})).currentUserId,t=Object(f.b)(),n=Object(f.c)((function(e){return e.following.usersId})),a=Object(c.useState)(!1),r=Object(u.a)(a,2),i=r[0],o=r[1];Object(c.useEffect)((function(){var n=function(){var n=Object(l.a)(d.a.mark((function n(){var c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Z.get("/users/followings/"+e);case 3:c=n.sent,t(oe(c.data)),o(!0),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0.message);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();n()}),[e,t]);var j=Object(c.useState)(!0),b=Object(u.a)(j,2),p=b[0],h=b[1];return Object(c.useEffect)((function(){window.innerWidth<=600&&h(!1)}),[]),i&&Object(X.jsxs)(X.Fragment,{children:[p?Object(X.jsx)("i",{className:"fas fa-caret-square-left caret-left caret-sidebar",style:{fontSize:"25px"},onClick:function(){return h(!p)}}):Object(X.jsx)("i",{className:"fas fa-caret-square-right caret-right caret-sidebar",style:{fontSize:"25px"},onClick:function(){return h(!p)}}),Object(X.jsx)("div",{className:p?"sidebar showSidebar":"sidebar hideSidebar",children:Object(X.jsxs)("div",{className:"sidebar-wrapper",children:[Object(X.jsxs)("ul",{className:"menu-list",children:[Object(X.jsx)("li",{className:"menu-list-item",children:Object(X.jsxs)(s.b,{className:"text-link",to:"/",children:[Object(X.jsx)(be.a,{className:"menu-list-icon"}),Object(X.jsx)("span",{className:"menu-list-text",children:"Feed"})]})}),Object(X.jsx)("li",{className:"menu-list-item",children:Object(X.jsxs)(s.b,{className:"text-link",to:"/chat",children:[Object(X.jsx)(re.a,{className:"menu-list-icon"}),Object(X.jsx)("span",{className:"menu-list-text",children:"Chats"})]})}),Object(X.jsx)("li",{className:"menu-list-item",children:Object(X.jsxs)(s.b,{className:"text-link",to:"/friendPage?type=all",children:[Object(X.jsx)(fe.a,{className:"menu-list-icon"}),Object(X.jsx)("span",{className:"menu-list-text",children:"Find Friend"})]})})]}),Object(X.jsx)("hr",{}),Object(X.jsxs)("div",{className:"friend-list",children:[Object(X.jsx)("h2",{className:"heading",children:Object(X.jsxs)("span",{className:"follower-following-counter",children:[Object(X.jsx)("i",{className:"fas fa-users",style:{fontSize:"25px"}})," My Followings  (",n.length,")"]})}),0!==n.length?n.slice(0,5).map((function(e){return Object(X.jsx)(pe,{userId:e,className:"friend-list-item"},e)})):"Currently no followings",Object(X.jsx)(s.b,{className:"text-link",to:{pathname:"/friendPage",search:"type=Myfollowings",state:{usersId:n}},children:Object(X.jsx)("button",{className:"show-all",children:"Show All"})})]})]})})]})},me=(n(139),n(182)),Oe=n(183),ve=n(184),xe=n(185),ge=n(186),Ne=(n(140),n(53)),ke=n.n(Ne);n(161);ke.a.initializeApp({apiKey:"AIzaSyDG4UwInJWCmztkK2nAIhqrLPJB5-H_FU4",authDomain:"socialify-8b5dd.firebaseapp.com",projectId:"socialify-8b5dd",storageBucket:"socialify-8b5dd.appspot.com",messagingSenderId:"106617260750",appId:"1:106617260750:web:e0806af0c47ae445d59e9f",measurementId:"G-PTGDWZE2HZ"});var we=ke.a.storage();var ye=function(e){var t=e.posts,n=e.setPosts,a="http://localhost:3000/asset/";a="https://socialifyapp.herokuapp.com/asset/";var r=Object(f.c)((function(e){return e.user})).currentUserId,s=Object(c.useState)(null),j=Object(u.a)(s,2),b=j[0],p=j[1];Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/users?userId="+r);case 3:t=e.sent,p(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[r,p]),Object(i.f)();var h=Object(c.useState)(""),m=Object(u.a)(h,2),O=m[0],v=m[1],x=Object(c.useState)(),g=Object(u.a)(x,2),N=g[0],k=g[1],w=Object(c.useState)(0),y=Object(u.a)(w,2),I=y[0],S=y[1],C=Object(c.useState)(null),P=Object(u.a)(C,2),_=P[0],E=P[1],U=Object(c.useState)(!1),L=Object(u.a)(U,2),T=L[0],F=L[1],R=function(){var e=Object(l.a)(d.a.mark((function e(c){var a,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),a={userId:r,desc:O},!N){e.next=6;break}try{s=Date.now()+N.name,we.ref("".concat(null===b||void 0===b?void 0:b.username,"/posts/").concat(s)).put(N).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);S(t)}),(function(e){console.log(e)}),Object(l.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.ref("".concat(null===b||void 0===b?void 0:b.username,"/posts/")).child(s).getDownloadURL().then((function(e){a.img=e}));case 2:return e.next=4,Z.post("/posts/"+r,a);case 4:c=e.sent,n([c.data].concat(Object(o.a)(t))),v(""),E(null),S(0),k(null),F(!0),setTimeout((function(){F(!1)}),1e3);case 12:case"end":return e.stop()}}),e)}))))}catch(u){console.log(u.message)}e.next=22;break;case 6:return e.prev=6,e.next=9,Z.post("/posts/"+r,a);case 9:i=e.sent,n([i.data].concat(Object(o.a)(t))),E(null),S(0),k(null),F(!0),v(""),setTimeout((function(){F(!1)}),1e3),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),console.log(e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.jsx)("div",{className:"share",children:Object(X.jsxs)("div",{className:"share-wrapper",children:[Object(X.jsxs)("div",{className:"share-top",children:[Object(X.jsx)("img",{src:null!==b&&void 0!==b&&b.profilePicture?null===b||void 0===b?void 0:b.profilePicture:a+"person/noAvatar.png",alt:"profileimg"}),Object(X.jsx)("input",{type:"text",value:O,onChange:function(e){return v(e.target.value)},placeholder:"What in Your Mind Today "+(null===b||void 0===b?void 0:b.username)+" ??"})]}),Object(X.jsx)("hr",{}),_?Object(X.jsxs)("div",{className:"img-upload",children:[Object(X.jsx)("img",{src:_,className:"uploaded-img",alt:"No images Selected"}),Object(X.jsx)("div",{className:"remove-uploaded-img",onClick:function(){k(null),E(null)},children:Object(X.jsx)(me.a,{})}),Object(X.jsx)("progress",{className:"upload-progress",value:I}),100===I?Object(X.jsx)("div",{className:"upload-complete",children:" Image Upload completed"}):""]}):"",T?Object(X.jsx)("div",{className:"post-complete",children:" Post Successfully "}):"",Object(X.jsx)("div",{className:"share-bottom",children:Object(X.jsxs)("form",{onSubmit:R,className:"option-container",children:[Object(X.jsxs)("label",{htmlFor:"file",className:"option",children:[Object(X.jsx)(Oe.a,{htmlColor:"red",className:"icon"}),Object(X.jsx)("span",{className:"option-text",children:"Photo & Video"}),Object(X.jsx)("input",{type:"file",name:"file",accept:"image/*",id:"file",style:{display:"none"},onChange:function(e){if(e.target.files[0]){k(e.target.files[0]);var t=new FileReader;t.onloadend=function(){E(t.result)},t.readAsDataURL(e.target.files[0])}else k(null)}})]}),Object(X.jsxs)("label",{htmlFor:"label",className:"option",children:[Object(X.jsx)(ve.a,{htmlColor:"blue",className:"icon"}),Object(X.jsx)("span",{className:"option-text",style:{textDecorationLine:"line-through"},children:"Label"}),Object(X.jsx)("input",{type:"label",name:"label",id:"label",style:{display:"none"},onChange:function(e){}})]}),Object(X.jsxs)("label",{htmlFor:"location",className:"option",children:[Object(X.jsx)(xe.a,{htmlColor:"green",className:"icon"}),Object(X.jsx)("span",{className:"option-text",style:{textDecorationLine:"line-through"},children:"Location"}),Object(X.jsx)("input",{type:"location",name:"location",id:"location",style:{display:"none"},onChange:function(e){}})]}),Object(X.jsxs)("label",{htmlFor:"feeling",className:"option",children:[Object(X.jsx)(ge.a,{htmlColor:"yellow",className:"icon"}),Object(X.jsx)("span",{className:"option-text",style:{textDecorationLine:"line-through"},children:"Feeling"}),Object(X.jsx)("input",{type:"feeling",name:"feeling",id:"feeling",style:{display:"none"},onChange:function(e){}})]}),Object(X.jsx)("button",{type:"submit",children:" Share "})]})})]})})},Ie=(n(142),n(187));n(143);var Se=function(e){var t=e.c,n=e.deleteComment,a=Object(f.c)((function(e){return e.user.currentUserId})),r=Object(c.useState)(null),s=Object(u.a)(r,2),i=s[0],o=s[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.get("/users?userId=".concat(t.userId));case 2:n=e.sent,o(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(X.jsxs)("div",{className:"postCommentItem",children:[Object(X.jsx)("div",{className:"postCommentItemImgContainer",children:Object(X.jsx)("img",{src:null===i||void 0===i?void 0:i.profilePicture,alt:"img",className:"postCommentItemImg"})}),Object(X.jsxs)("div",{className:"postCommentItemContent",children:[Object(X.jsxs)("div",{className:"postContainerItemText",children:[Object(X.jsx)("b",{children:null===i||void 0===i?void 0:i.name})," ",t.text]}),a===t.userId&&Object(X.jsxs)("button",{onClick:function(){return n(t._id)},className:"postCommentItemButton",children:[Object(X.jsx)("i",{className:"fas fa-trash"}),"  delete"]})]})]})},Ce=n(189),Pe=n(190);n(144);var _e=function(e){var t=e.userId,n=Object(c.useState)(null),a=Object(u.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/users?userId=".concat(t));case 3:n=e.sent,s(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(X.jsxs)("li",{className:"likeModalListItem",children:[Object(X.jsx)("div",{className:"likeModalListItemImgContainer",children:Object(X.jsx)("img",{src:null===r||void 0===r?void 0:r.profilePicture,alt:"",className:"likeModalListItemImg"})}),Object(X.jsxs)("div",{className:"likeModelListItemName",children:[" ",null===r||void 0===r?void 0:r.name," "]})]})};var Ee=function(e){return Object(X.jsxs)(Ce.a,Object(O.a)(Object(O.a)({},e),{},{size:"sm","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(X.jsx)(Ce.a.Header,{closeButton:!0,children:Object(X.jsxs)(Ce.a.Title,{id:"contained-modal-title-vcenter",children:["Like(",e.likes.length,")"]})}),Object(X.jsx)(Ce.a.Body,{children:Object(X.jsx)("ul",{className:"likeModalList",children:e.likes.map((function(e){return Object(X.jsx)(_e,{userId:e},e)}))})}),Object(X.jsx)(Ce.a.Footer,{children:Object(X.jsx)(Pe.a,{onClick:e.onHide,children:"Close"})})]}))};var Ue=function(e){var t=e.post,n=e.posts,a=e.setPosts,r=Object(f.c)((function(e){return e.user})).currentUserId,i=Object(f.c)((function(e){return e.socket.socket})),j="http://localhost:3000/asset/";j="https://socialifyapp.herokuapp.com/asset/";var b=Object(c.useState)({}),p=Object(u.a)(b,2),h=p[0],m=p[1],O=Object(c.useState)(t.like),v=Object(u.a)(O,2),x=v[0],g=v[1],N=Object(c.useState)(!1),k=Object(u.a)(N,2),w=k[0],y=k[1];Object(c.useEffect)((function(){var e;y(null===(e=t.like)||void 0===e?void 0:e.includes(r))}),[r,t.like]);var I=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.put("/posts/"+t._id+"/like",{userId:r});case 3:null===i||void 0===i||i.emit("sendNotification",{receiverId:t.userId,senderId:r,text:w?"unlike your Post":"like your post",type:w?"unlike":"like"}),g(w?function(e){return e.filter((function(e){return e!==r}))}:function(e){return[r].concat(Object(o.a)(e))}),y(!w),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.get("/users?userId=".concat(t.userId));case 2:n=e.sent,m(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t.userId]);var S=Object(c.useState)(!1),C=Object(u.a)(S,2),P=C[0],_=C[1],E=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.delete("/posts/"+t._id+"/"+r);case 3:_(!0),a(n.filter((function(e){return e._id!==t._id}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),U=Object(c.useState)([]),L=Object(u.a)(U,2),T=L[0],F=L[1];Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/comment/"+t._id);case 3:n=e.sent,F(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t._id]);var R=Object(c.useState)(""),A=Object(u.a)(R,2),z=A[0],D=A[1],M=Object(c.useState)(!1),q=Object(u.a)(M,2),B=q[0],W=q[1],G=function(){var e=Object(l.a)(d.a.mark((function e(n){var c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,c={postId:t._id,userId:r,text:z},e.next=5,Z.post("/comment/"+t._id,c);case 5:a=e.sent,F((function(e){return[].concat(Object(o.a)(e),[a.data])})),D(""),null===i||void 0===i||i.emit("sendNotification",{receiverId:t.userId,senderId:r,text:"comment on your post",type:"comment"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.delete("/comment/".concat(t,"/").concat(r));case 3:F(T.filter((function(e){return e._id!=t}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),H=Object(c.useState)(!1),J=Object(u.a)(H,2),K=J[0],Y=J[1];return Object(X.jsx)("div",{className:"post",children:Object(X.jsxs)("div",{className:"post-wrapper",children:[Object(X.jsxs)("div",{className:"post-top",children:[Object(X.jsxs)("div",{className:"post-top-left",children:[Object(X.jsx)("img",{className:"profile-img",src:h.profilePicture?h.profilePicture:j+"person/noAvatar.png",alt:"img"}),Object(X.jsx)(s.b,{className:"text-link",to:"/profile/".concat(h.username),children:Object(X.jsx)("div",{className:"name",children:h.name})}),Object(X.jsx)("div",{className:"time",children:Object(ee.a)(t.createdAt)})]}),Object(X.jsxs)("div",{className:"post-top-right",children:[Object(X.jsx)(Ie.a,{className:"more-icon"}),t.userId===r?Object(X.jsx)("i",{className:"fas fa-trash",onClick:E,style:{fontSize:"25px"}}):"",P?Object(X.jsx)("div",{className:"deleted",children:"Post Deleted"}):""]})]}),Object(X.jsx)("hr",{}),Object(X.jsxs)("div",{className:"post-middle",children:[Object(X.jsx)("div",{className:"post-text",children:t.desc}),t.img&&Object(X.jsx)("img",{src:t.img,className:"post-img",alt:"post-img"})]}),Object(X.jsxs)("div",{className:"post-bottom",children:[Object(X.jsxs)("div",{className:"post-bottom-left",children:[w?Object(X.jsx)("i",{className:"fas fa-heart",onClick:I,style:{color:"red",fontSize:"25px"}}):Object(X.jsx)("i",{className:"far fa-heart",onClick:I,style:{color:"red",fontSize:"25px"}}),Object(X.jsx)("span",{className:"like-counter",onClick:function(){return Y(!0)},children:Object(X.jsxs)("b",{children:[x.length," people like it"]})}),Object(X.jsx)(Ee,{show:K,onHide:function(){return Y(!1)},likes:x})]}),Object(X.jsx)("div",{className:"post-bottom-right",children:Object(X.jsxs)("span",{className:"comment-counter",onClick:function(){return W(!B)},children:[Object(X.jsx)("i",{className:"fas fa-comments"})," ",Object(X.jsxs)("b",{children:[" ",T.length," comment "]})]})})]}),Object(X.jsxs)("div",{className:"postComment",children:[B&&T.map((function(e){return Object(X.jsx)(Se,{c:e,deleteComment:V})})),Object(X.jsxs)("form",{className:"postCommentForm",children:[Object(X.jsx)("input",{type:"text",value:z,onChange:function(e){return D(e.target.value)},className:"postCommentInput",placeholder:"write your comment here"}),Object(X.jsx)("button",{className:"postCommentButton",type:"submit",onClick:function(e){return G(e)},children:Object(X.jsx)("i",{className:"fas fa-paper-plane",style:{fontSize:"16px"},children:"Send"})})]})]})]})})};var Le=function(e){var t=e.username,n=e.timeline,a=Object(f.c)((function(e){return e.user})).currentUserId,r=Object(c.useState)(null),s=Object(u.a)(r,2),i=s[0],o=s[1];Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/users?userId="+a);case 3:t=e.sent,o(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[a,o]);var j=Object(c.useState)([]),b=Object(u.a)(j,2),p=b[0],h=b[1];return Object(c.useEffect)((function(){var e=new AbortController,n=function(){var e=Object(l.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,Z.get("/posts/profile/"+t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,Z.get("/posts/timeline/"+a);case 8:e.t0=e.sent;case 9:n=e.t0,h(n.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n(),function(){return e.abort()}}),[t,a]),Object(X.jsx)("div",{className:"feed",children:Object(X.jsxs)("div",{className:"feed-wrapper",children:[t===(null===i||void 0===i?void 0:i.username)||n?Object(X.jsx)(ye,{setPosts:h,posts:p}):"",0!==p.length?p.map((function(e){return Object(X.jsx)(Ue,{post:e,posts:p,setPosts:h},e._id)})):"No Post Currently."]})})};n(145);var Te=function(){var e=Object(f.c)((function(e){return e.user})).currentUserId,t=Object(f.c)((function(e){return e.following.usersId})),n=Object(f.c)((function(e){return e.socket.socket})),a="http://localhost:3000/asset/";a="https://socialifyapp.herokuapp.com/asset/";var r=Object(c.useState)([]),s=Object(u.a)(r,2),i=s[0],o=s[1];Object(c.useEffect)((function(){console.log(),e&&(null===n||void 0===n||n.emit("addUser",e)),null===n||void 0===n||n.on("getUsers",(function(e){o(null===t||void 0===t?void 0:t.filter((function(t){return e.some((function(e){return e.userId===t}))})))}))}),[e,t,n]);var l=Object(c.useState)(!0),j=Object(u.a)(l,2),d=j[0],b=j[1];return Object(c.useEffect)((function(){window.innerWidth<=600&&b(!1)}),[]),Object(X.jsxs)(X.Fragment,{children:[d?Object(X.jsx)("i",{className:"fas fa-caret-square-right caret-right caret-rightbar",style:{fontSize:"25px"},onClick:function(){return b(!d)}}):Object(X.jsx)("i",{className:"fas fa-caret-square-left caret-left caret-rightbar",style:{fontSize:"25px"},onClick:function(){return b(!d)}}),Object(X.jsx)("div",{className:d?"rightbar showRightbar":"rightbar hideRightbar",children:Object(X.jsxs)("div",{className:"rightbar-wrapper",children:[Object(X.jsx)("div",{className:"rightbar-top"}),Object(X.jsx)("div",{className:"rightbar-center",children:Object(X.jsx)("div",{className:"rightbarCenterImgContainer",children:Object(X.jsx)("img",{className:"rightbar-ad",src:a+"ad.jpg",alt:"ad"})})}),Object(X.jsx)("hr",{}),Object(X.jsxs)("div",{className:"rightbar-bottom",children:[Object(X.jsxs)("span",{className:"heading",children:[Object(X.jsx)("i",{className:"fas fa-globe-americas"})," Online Friend"]}),Object(X.jsx)("ul",{className:"online-friend-list",children:0===i.length?"No Friend Online Currently \ud83d\ude1e":null===i||void 0===i?void 0:i.map((function(e){return Object(X.jsx)(ne,{userId:e},e)}))})]})]})})]})};n(146);var Fe=function(){return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(ue,{}),Object(X.jsxs)("div",{className:"hero-container",children:[Object(X.jsx)(he,{}),Object(X.jsx)(Le,{timeline:!0}),Object(X.jsx)(Te,{})]})]})},Re=(n(147),n(188));var Ae=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(f.b)(),a=Object(f.c)((function(e){return e.user})),r=a.isLoading,o=a.error,u=Object(i.f)();return Object(X.jsx)("div",{className:"login",children:Object(X.jsxs)("div",{className:"login-wrapper",children:[Object(X.jsxs)("div",{className:"login-left",children:[Object(X.jsx)("div",{className:"logo",children:"Socialify"}),Object(X.jsx)("div",{className:"desc",children:"Connect to friend and the world around you on Socialify"})]}),Object(X.jsx)("div",{className:"login-right",children:Object(X.jsxs)("form",{onSubmit:function(c){c.preventDefault(),n(function(e,t){return function(){var n=Object(l.a)(d.a.mark((function n(c){var a,r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c({type:v});case 2:return n.prev=2,n.next=5,Y.post("/auth/login",{email:e,password:t});case 5:a=n.sent,r=a.data,localStorage.setItem("accessToken",r.accessToken),localStorage.setItem("refreshToken",r.refreshToken),c((s=r._id,{type:x,payload:s})),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),c({type:g});case 15:case"end":return n.stop()}var s}),n,null,[[2,12]])})));return function(e){return n.apply(this,arguments)}}()}(e.current.value,t.current.value)),u.push("/"),console.log(o,r)},className:"login-form",children:[Object(X.jsx)("input",{type:"text",placeholder:"Email",ref:e}),Object(X.jsx)("input",{type:"password",placeholder:"Password",ref:t}),Object(X.jsx)("button",{className:"login-btn",type:"submit",disabled:r,children:r?Object(X.jsx)(Re.a,{size:"20px"}):"Log In"}),Object(X.jsx)(s.b,{className:"text-link",to:"/register",children:Object(X.jsx)("button",{className:"register-btn",type:"submit",disabled:r,children:r?Object(X.jsx)(Re.a,{size:"20px"}):"Sign Up"})})]})})]})})};n(148),n(149),n(150);var ze=function(e){var t=e.userId,n=Object(f.c)((function(e){return e.user.currentUserId})),a=Object(i.h)(),r=Object(i.f)(),o=Object(c.useState)(null),j=Object(u.a)(o,2),b=j[0],p=j[1],h=Object(c.useState)(null),m=Object(u.a)(h,2),O=m[0],v=m[1],x=a.username,g=Object(c.useState)({}),N=Object(u.a)(g,2),k=N[0],w=N[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/users?username=".concat(x));case 3:t=e.sent,w(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[x,r]),Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var t,c,a,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={userId:n},!O){e.next=14;break}return e.prev=2,c=Date.now()+O.name,a=we.ref("".concat(k.username,"/coverPic/").concat(c)).put(O),e.next=7,a.on("state_changed",(function(e){}),(function(e){console.log(e)}),Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.ref("".concat(k.username,"/coverPic")).child(c).getDownloadURL().then((function(e){t.coverPicture=e}));case 2:return e.next=4,Z.put("/users/"+k._id,t);case 4:v(null),window.location.reload();case 6:case"end":return e.stop()}}),e)}))));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.message);case 12:e.next=25;break;case 14:if(!b){e.next=25;break}return e.prev=15,r=Date.now()+b.name,s=we.ref("".concat(k.username,"/profilePic/").concat(r)).put(b),e.next=20,s.on("state_changed",(function(e){}),(function(e){console.log(e)}),Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.ref("".concat(k.username,"/profilePic")).child(r).getDownloadURL().then((function(e){t.profilePicture=e}));case 2:return e.next=4,Z.put("/users/"+k._id,t);case 4:p(null),window.location.reload();case 6:case"end":return e.stop()}}),e)}))));case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(15),console.log(e.t1.message);case 25:case"end":return e.stop()}}),e,null,[[2,9],[15,22]])})));return function(){return e.apply(this,arguments)}}();e()}),[O,b,n,r,k._id,k.username]),Object(X.jsx)(X.Fragment,{children:n===t?Object(X.jsxs)("div",{className:"profile-top-btn-container",children:[Object(X.jsxs)("label",{htmlFor:"cover-pic",className:"profile-top-btn",children:[Object(X.jsx)("i",{className:"fas fa-images"}),"Change Cover",Object(X.jsx)("input",{type:"file",name:"cover-pic",id:"cover-pic",style:{display:"none"},className:"change-cover",onChange:function(e){return v(e.target.files[0])}})]}),Object(X.jsxs)("label",{htmlFor:"profile-pic",className:"profile-top-btn",children:[Object(X.jsx)("i",{className:"fas fa-user"}),"Change Profile",Object(X.jsx)("input",{type:"file",name:"profile-pic",id:"profile-pic",style:{display:"none"},className:"profile-cover",onChange:function(e){return p(e.target.files[0])}})]}),Object(X.jsx)(s.b,{to:"/updateInfo",children:Object(X.jsxs)("button",{className:"profile-top-btn cover-pic",children:[" ",Object(X.jsx)("i",{className:"fas fa-pen"})," Update Info"]})})]}):""})};var De=function(e){var t=e.user,n=Object(f.b)(),a=Object(f.c)((function(e){return e.user})).currentUserId,r=Object(f.c)((function(e){return e.socket.socket})),i=Object(c.useState)(t.followers.includes(a)),j=Object(u.a)(i,2),b=j[0],p=j[1],h=Object(c.useState)(!1),m=Object(u.a)(h,2),O=m[0],v=m[1],x=Object(c.useState)([]),g=Object(u.a)(x,2),N=g[0],k=g[1],w=Object(c.useState)([]),y=Object(u.a)(w,2),I=y[0],S=y[1],C=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!b){e.next=10;break}return e.next=4,Z.put("/users/"+t._id+"/"+a+"/unfollow");case 4:n(ie(t._id)),null===r||void 0===r||r.emit("sendNotification",{receiverId:null===t||void 0===t?void 0:t._id,senderId:a,text:"unfollow you",type:"unfollow"}),p(!b),S(I.filter((function(e){return e!==a}))),e.next=16;break;case 10:return e.next=12,Z.put("/users/"+t._id+"/"+a+"/follow");case 12:n(se(t._id)),null===r||void 0===r||r.emit("sendNotification",{receiverId:null===t||void 0===t?void 0:t._id,senderId:a,text:"started following you",type:"unfollow"}),p(!b),S([].concat(Object(o.a)(I),[a]));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.get("/users/followings/"+t._id);case 2:return n=e.sent,e.next=5,Z.get("/users/followers/"+t._id);case 5:c=e.sent,k(n.data),S(c.data),v(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]),O&&Object(X.jsx)("div",{className:"profile-rightbar",children:Object(X.jsxs)("div",{className:"profile-rightbar-wrapper",children:[Object(X.jsx)(ze,{userId:t._id}),t._id!==a?Object(X.jsx)("button",{className:"follow-btn",onClick:C,children:b?Object(X.jsx)("i",{className:"fas fa-user-minus",children:"  UnFollow"}):Object(X.jsx)("i",{className:"fas fa-user-plus",children:" Follow"})}):"",Object(X.jsxs)("div",{className:"user-info",children:[Object(X.jsxs)("div",{className:"title",children:[Object(X.jsx)("i",{className:"far fa-address-card",style:{fontSize:"25px"}})," About ",t.name]}),!t.work&&!t.school&&!t.from&&!t.live&&!t.relationship&&Object(X.jsx)("div",{children:"This User Information not available"}),Object(X.jsx)("div",{className:"info",children:t.work?Object(X.jsxs)("span",{children:[Object(X.jsx)("i",{className:"fas fa-briefcase"})," Work at ",Object(X.jsx)("b",{children:t.work})," "]}):""}),Object(X.jsx)("div",{className:"info",children:t.school?Object(X.jsxs)("span",{children:[Object(X.jsx)("i",{className:"fas fa-university"})," Studied at ",Object(X.jsx)("b",{children:t.school})," "]}):""}),Object(X.jsx)("div",{className:"info",children:t.from?Object(X.jsxs)("span",{children:[Object(X.jsx)("i",{className:"fas fa-globe-americas"})," From ",Object(X.jsx)("b",{children:t.from})," "]}):""}),Object(X.jsx)("div",{className:"info",children:t.live?Object(X.jsxs)("span",{children:[" ",Object(X.jsx)("i",{className:"fas fa-building"})," Live in ",Object(X.jsx)("b",{children:t.live})," "]}):""}),Object(X.jsx)("div",{className:"info",children:t.relationship?Object(X.jsxs)("span",{children:[Object(X.jsx)("i",{className:"fas fa-heart"})," Relationship Status ",Object(X.jsx)("b",{children:1===t.relationship?"Single (\ud83d\ude03)":2===t.relationship?"In RelationShip (\ud83d\ude1e)":"Complicated (\ud83d\ude09)"})," "]}):""}),Object(X.jsx)("div",{className:"info",children:t.birthday?Object(X.jsxs)("span",{children:[Object(X.jsx)("i",{className:"fas fa-birthday-cake"})," Birthday on ",Object(X.jsx)("b",{children:t.birthday})," "]}):""})]}),Object(X.jsx)("hr",{}),Object(X.jsxs)("div",{className:"title",children:[Object(X.jsx)("i",{className:"fas fa-users",style:{fontSize:"25px"}})," ",t.name," following ",Object(X.jsxs)("span",{className:"follower-following-counter",children:["(",N.length,")"]})]}),Object(X.jsx)("div",{className:"user-friend-container",children:0!==N.length?N.slice(0,3).map((function(e){return Object(X.jsx)(pe,{className:"user-friend-item",userId:e},e)})):"No Following"}),Object(X.jsx)(s.b,{className:"text-link",to:{pathname:"/friendPage",search:"type=followings?userName=".concat(null===t||void 0===t?void 0:t.name),state:{usersId:N}},children:Object(X.jsx)("button",{className:"show-all",children:"Show All"})}),Object(X.jsx)("hr",{}),Object(X.jsxs)("div",{className:"title",children:[Object(X.jsx)("i",{className:"fas fa-users",style:{fontSize:"25px"}})," ",t.name," follower ",Object(X.jsxs)("span",{className:"follower-following-counter",children:["(",I.length,")"]})]}),Object(X.jsx)("div",{className:"user-friend-container",children:0!==I.length?I.slice(0,3).map((function(e){return Object(X.jsx)(pe,{className:"user-friend-item",userId:e},e)})):"No Follower"}),Object(X.jsx)(s.b,{className:"text-link",to:{pathname:"/friendPage",search:"type=followers?userName=".concat(null===t||void 0===t?void 0:t.name),state:{usersId:I}},children:Object(X.jsx)("button",{className:"show-all",children:"Show All"})})]})})};var Me=function(){var e="http://localhost:3000/asset/";e="https://socialifyapp.herokuapp.com/asset/";var t=Object(i.f)(),n=Object(i.h)().username,a=Object(c.useState)({}),r=Object(u.a)(a,2),s=r[0],o=r[1],j=Object(c.useState)(!1),b=Object(u.a)(j,2),f=b[0],p=b[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/users?username=".concat(n));case 3:t=e.sent,o(t.data),p(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),p(!0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[n,t]),f&&Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(ue,{}),Object(X.jsxs)("div",{className:"profile",children:[Object(X.jsx)(he,{}),Object(X.jsx)("div",{className:"profile-right",children:Object(X.jsxs)("div",{className:"profile-right-top",children:[Object(X.jsxs)("div",{className:"profile-cover",children:[Object(X.jsx)("img",{src:s.coverPicture?s.coverPicture:e+"/person/noCover.png",alt:"profileCoverPhoto",className:"profile-cover-photo"}),Object(X.jsx)("img",{src:s.profilePicture?s.profilePicture:e+"/person/noAvatar.png",alt:"profilePhoto",className:"profile-photo"})]}),Object(X.jsxs)("div",{className:"profile-info",children:[Object(X.jsx)("h4",{className:"name",children:s.name}),Object(X.jsx)("div",{className:"desc",children:s.desc})]}),Object(X.jsxs)("div",{className:"profile-right-bottom",children:[Object(X.jsx)(Le,{username:s.username}),Object(X.jsx)(De,{user:s})]})]})})]})]})},qe=(n(151),function(e){return function(){var t=Object(l.a)(d.a.mark((function t(n){var c,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n({type:y});case 2:return t.prev=2,t.next=5,Y.post("/auth/register",e);case 5:c=t.sent,a=c.data,localStorage.setItem("accessToken",a.accessToken),localStorage.setItem("refreshToken",a.refreshToken),n((r=a._id,{type:I,payload:r})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),n({type:S});case 15:case"end":return t.stop()}var r}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}()});var Be=function(){var e=Object(f.b)(),t=Object(i.f)(),n=Object(c.useRef)(),a=Object(c.useRef)(""),r=Object(c.useRef)(),o=Object(c.useRef)(),j=Object(c.useRef)(""),b=Object(c.useState)(!1),p=Object(u.a)(b,2),h=p[0],m=p[1],O=Object(c.useState)(!1),v=Object(u.a)(O,2),x=v[0],g=v[1],N=Object(c.useState)(30),k=Object(u.a)(N,2),w=k[0],y=k[1],I=Object(c.useState)(""),S=Object(u.a)(I,2),C=S[0],P=S[1],_=Object(c.useState)(""),E=Object(u.a)(_,2),U=(E[0],E[1],function(){var c=Object(l.a)(d.a.mark((function c(s){var i;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(s.preventDefault(),console.log(r.current.value,o.current.value),console.log(r.current.value===o.current.value),r.current.value===o.current.value){c.next=7;break}P("password do not match "),c.next=18;break;case 7:return i={username:n.current.value,email:a.current.value,password:r.current.value},c.prev=8,c.next=11,e(qe(i));case 11:t.push("/updateInfo"),c.next=18;break;case 14:c.prev=14,c.t0=c.catch(8),P(c.t0.message),console.log(c.t0);case 18:case"end":return c.stop()}}),c,null,[[8,14]])})));return function(e){return c.apply(this,arguments)}}()),L=function(){var e=Object(l.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.get("/otp/gernate/"+a.current.value);case 3:t=e.sent,console.log(t.data),m(!0),n=setInterval((function(){y((function(e){return e-1}))}),1e3),setTimeout((function(){m(!1),y(30),clearInterval(n)}),3e4),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),P(e.t0.message),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log({email:a.current.value,otp:j.current.value}),e.next=4,Y.post("/otp/verify",{email:a.current.value,otp:j.current.value});case 4:t=e.sent,P(t.data),g(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),P(e.t0.message),e.t0.response&&(P(e.t0.response.data),console.log(e.t0.response.data));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(X.jsx)("div",{className:"register",children:Object(X.jsxs)("div",{className:"register-wrapper",children:[Object(X.jsxs)("div",{className:"register-left",children:[Object(X.jsx)("div",{className:"logo",children:"Socialify"}),Object(X.jsx)("div",{className:"desc",children:"Connect to friend and the world around you on Socialify"})]}),Object(X.jsxs)("div",{className:"register-right",children:[C&&C,Object(X.jsxs)("form",{onSubmit:U,className:"register-form",children:[Object(X.jsx)("input",{type:"text",placeholder:"Username",required:!0,ref:n}),Object(X.jsxs)("div",{className:"inputAndBtn",children:[Object(X.jsx)("input",{type:"email",onChange:function(){m(!1),g(!1)},placeholder:"email",required:!0,ref:a}),!h&&!x&&Object(X.jsx)("button",{type:"button",className:"otp-btn",onClick:L,children:"Send OTP"})]}),(h||x)&&Object(X.jsxs)("div",{className:"inputAndBtn",children:[Object(X.jsx)("input",{type:"text",placeholder:"OTP",required:!0,ref:j}),!x&&Object(X.jsxs)("button",{type:"button",onClick:T,className:"otp-btn",children:["Verify OTP ",w]})]}),Object(X.jsx)("input",{type:"password",placeholder:"Password",required:!0,minLength:"6",ref:r}),Object(X.jsx)("input",{type:"password",placeholder:"Comfirm Password",required:!0,ref:o}),Object(X.jsx)("button",{type:"submit",className:"submit-btn register-btn",disabled:!x,children:"Sign Up"}),Object(X.jsx)(s.b,{className:"text-link",to:"/login",children:Object(X.jsx)("button",{className:"submit-btn login-btn",children:"LogIn"})})]})]})]})})};n(152),n(153);var We=function(e){var t=e.userId,n=Object(i.f)(),a=Object(f.c)((function(e){return e.user})).currentUserId,r="http://localhost:3000/asset/";r="https://socialifyapp.herokuapp.com/asset/";var s=Object(f.b)();Object(f.c)((function(e){return e.following.usersId})),Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/users/followings/"+a);case 3:t=e.sent,s(oe(t.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[a,s]);var o=Object(c.useState)(),j=Object(u.a)(o,2),b=j[0],p=j[1];Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/users?userId="+t);case 3:n=e.sent,p(n.data),v(n.data.followers.includes(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[t,a]);var h=Object(c.useState)(null===b||void 0===b?void 0:b.followers.includes(a)),m=Object(u.a)(h,2),O=m[0],v=m[1],x=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!O){e.next=8;break}return e.next=4,Z.put("/users/"+t+"/"+a+"/unfollow");case 4:s(ie(t)),v(!O),e.next=12;break;case 8:return e.next=10,Z.put("/users/"+t+"/"+a+"/follow");case 10:s(se(t)),v(!O);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)("div",{className:"friendMenuItem",children:[Object(X.jsx)("div",{className:"friendMenuItemImgContainer",children:Object(X.jsx)("img",{src:null!==b&&void 0!==b&&b.profilePicture?null===b||void 0===b?void 0:b.profilePicture:r+"/person/noAvatar.png",alt:"",className:"friendMenuItemImg"})}),Object(X.jsxs)("div",{className:"friendMenuItemContent",children:[Object(X.jsxs)("div",{className:"friendMenuItemLeft",children:[Object(X.jsx)("div",{className:"top",children:Object(X.jsx)("b",{children:null===b||void 0===b?void 0:b.name})}),Object(X.jsxs)("div",{className:"bottom",children:[Object(X.jsxs)("div",{className:"from info-item",children:[Object(X.jsx)("i",{className:"fas fa-building"})," ",null===b||void 0===b?void 0:b.from]}),Object(X.jsxs)("div",{className:"work info-item",children:[Object(X.jsx)("i",{className:"fas fa-briefcase"})," ",null===b||void 0===b?void 0:b.work]}),Object(X.jsxs)("div",{className:"work info-item",children:[Object(X.jsx)("i",{className:"fas fa-university"})," ",null===b||void 0===b?void 0:b.school]})]})]}),Object(X.jsx)("div",{className:"friendMenuItemRight",children:t!==a?Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("button",{onClick:x,className:"friendMenuItemRightButton",children:O?Object(X.jsx)("i",{className:"fas fa-user-minus",children:"  UnFollow"}):Object(X.jsx)("i",{className:"fas fa-user-plus",children:" Follow"})}),Object(X.jsxs)("button",{className:"friendMenuItemRightButton",onClick:function(){return n.push("/profile/".concat(null===b||void 0===b?void 0:b.username))},children:[" ",Object(X.jsx)("i",{className:"fas fa-user-alt"})," Profile"]})]}):""})]})]})})};var Ge=function(){var e,t,n,a,r,s=Object(f.c)((function(e){return e.user})).currentUserId,o=Object(i.g)();console.log(o);var j=null===(e=o.search)||void 0===e||null===(t=e.split("?")[1])||void 0===t?void 0:t.split("=")[1],b=null===(n=o.search)||void 0===n||null===(a=n.split("?")[2])||void 0===a?void 0:a.split("=")[1],p=Object(c.useState)([]),h=Object(u.a)(p,2),m=h[0],O=h[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"all"!==j){e.next=8;break}return e.next=4,Z.get("/users/allUsers",{userId:s});case 4:t=e.sent,O(t.data.map((function(e){return e._id,e._id}))),e.next=9;break;case 8:O(o.state.usersId);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[s,null===(r=o.state)||void 0===r?void 0:r.usersId,j]),Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(ue,{}),Object(X.jsx)("div",{className:"friendMenuContainer",children:Object(X.jsxs)("div",{className:"friendMenuWrapper",children:[Object(X.jsxs)("h2",{children:[b," ",j]}),0===m.length?"No one to show":null===m||void 0===m?void 0:m.map((function(e){return Object(X.jsx)(We,{userId:e},e)}))]})})]})};n(154);var Ve=function(){var e=Object(f.c)((function(e){return e.following.usersId})),t=Object(f.c)((function(e){return e.user})).currentUserId,n=Object(c.useState)(null),a=Object(u.a)(n,2),r=a[0],s=a[1];Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/users?userId="+t);case 3:n=e.sent,s(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t,s]);var o=Object(c.useState)(),j=Object(u.a)(o,2),b=j[0],p=j[1],h=Object(c.useRef)(),m=Object(c.useRef)(),O=Object(c.useRef)(),v=Object(c.useRef)(),x=Object(c.useRef)(),g=Object(c.useRef)(),N=Object(c.useRef)(),k=Object(c.useRef)(),w=Object(i.f)(),y=function(){var n=Object(l.a)(d.a.mark((function n(c){var a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.preventDefault(),a={userId:t,name:h.current.value,from:m.current.value,live:O.current.value,work:v.current.value,school:x.current.value,desc:k.current.value,relationship:g.current},console.log(a),n.prev=3,n.next=6,Z.put("/users/"+t,a);case 6:n.sent,p(!0),e.length>0?w.push("/profile/"+(null===r||void 0===r?void 0:r.username)):w.push("/friendPage?type=all"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}();return Object(X.jsxs)("div",{className:"updateProfileContainer",children:[Object(X.jsx)(ue,{}),Object(X.jsxs)("div",{className:"profile-update",children:[b?"the profile Infomation is now updated":"",Object(X.jsxs)("form",{className:"profile-update-form",onSubmit:y,children:[Object(X.jsx)("input",{type:"text",ref:h,placeholder:"Name",defaultValue:null===r||void 0===r?void 0:r.name,required:!0}),Object(X.jsxs)("div",{className:"birthday",children:[Object(X.jsx)("label",{htmlFor:"birthday",className:"birthday-label",children:"Date of Birth    :"}),Object(X.jsx)("input",{type:"date",ref:N,placeholder:"birthday",defaultValue:null===r||void 0===r?void 0:r.birthday})]}),Object(X.jsx)("input",{type:"text",ref:m,placeholder:"From",defaultValue:null===r||void 0===r?void 0:r.from,required:!0}),Object(X.jsx)("input",{type:"text",ref:O,placeholder:"Live",defaultValue:null===r||void 0===r?void 0:r.live,required:!0}),Object(X.jsx)("input",{type:"text",ref:v,placeholder:"Work",defaultValue:null===r||void 0===r?void 0:r.work,required:!0}),Object(X.jsx)("input",{type:"text",ref:x,placeholder:"School",defaultValue:null===r||void 0===r?void 0:r.school,required:!0}),Object(X.jsx)("h3",{children:"Relationship Status"}),Object(X.jsxs)("div",{className:"relationshipStatus",children:[Object(X.jsxs)("label",{htmlFor:"single",children:[Object(X.jsx)("span",{children:" Single "}),Object(X.jsx)("input",{type:"radio",name:"relationship",id:"single",value:"1",onChange:function(e){return g.current=e.target.value}})," "]}),Object(X.jsxs)("label",{htmlFor:"inRelationship",children:[" In a relationship ",Object(X.jsx)("input",{type:"radio",name:"relationship",id:"inRelationship",value:"2",onChange:function(e){return g.current=e.target.value}}),"  "]}),Object(X.jsxs)("label",{htmlFor:"complicated",children:[" Complicated ",Object(X.jsx)("input",{type:"radio",name:"relationship",id:"complicated",value:"3",onChange:function(e){return g.current=e.target.value}})," "]})]}),Object(X.jsx)("textarea",{name:"",id:"",cols:"30",rows:"5",ref:k,placeholder:"Write Something About You Here",defaultValue:null===r||void 0===r?void 0:r.desc,required:!0}),Object(X.jsx)("button",{type:"submit",children:"Save"})]})]})]})},He=n(92);n(159);var Je=function(){var e=Object(f.b)(),t=Object(f.c)((function(e){return e.user})).currentUserId;return Object(c.useEffect)((function(){var n,c;t&&(null===(n=c=Object(He.a)("https://socialifyappsocket.herokuapp.com/"))||void 0===n||n.emit("addUser",t),e(function(e){return{type:F,payload:e}}(c)))}),[e,t]),Object(X.jsx)(s.a,{children:Object(X.jsxs)(i.c,{children:[Object(X.jsxs)(i.a,{path:"/",exact:!0,children:[" ",t?Object(X.jsx)(Fe,{}):Object(X.jsx)(Ae,{})]}),Object(X.jsxs)(i.a,{path:"/profile/:username",exact:!0,children:[" ",t?Object(X.jsx)(Me,{}):Object(X.jsx)(Ae,{}),"  "]}),Object(X.jsx)(i.a,{path:"/login",exact:!0,children:t?Object(X.jsx)(Fe,{}):Object(X.jsx)(Ae,{})}),Object(X.jsxs)(i.a,{path:"/register",exact:!0,children:[" ",t?Object(X.jsx)(Fe,{}):Object(X.jsx)(Be,{})]}),Object(X.jsxs)(i.a,{path:"/chat",exact:!0,children:[" ",t?Object(X.jsx)(je,{}):Object(X.jsx)(Be,{})]}),Object(X.jsxs)(i.a,{path:"/friendPage",exact:!0,children:[" ",t?Object(X.jsx)(Ge,{}):Object(X.jsx)(Be,{})]}),Object(X.jsxs)(i.a,{path:"/updateInfo",exact:!0,children:[" ",t?Object(X.jsx)(Ve,{}):Object(X.jsx)(Be,{})]}),Object(X.jsxs)(i.a,{path:"/error",exact:!0,children:[" ",Object(X.jsx)(de,{})," "]})]})})},Ke=n(91);r.a.render(Object(X.jsx)(f.a,{store:V,children:Object(X.jsx)(Ke.a,{persistor:H,children:Object(X.jsx)(Je,{})})}),document.getElementById("root"))}},[[160,1,2]]]);
//# sourceMappingURL=main.bf563995.chunk.js.map